#!/usr/bin/env runhaskell
import Control.Monad (unless)
import qualified System.Process as S
import qualified System.Exit as S

sh :: String -> IO ()
sh cmd = do
  x <- S.system cmd
  case x of
       S.ExitFailure _ -> error $ "[ERROR]" ++ cmd ++ " failed."
       _ -> return ()

main :: IO ()
main = do
  sh "cabal sandbox init"
  sh "cabal install --only-dependencies"
  sh "cabal configure --enable-test"
  sh "cabal install --reinstall"
